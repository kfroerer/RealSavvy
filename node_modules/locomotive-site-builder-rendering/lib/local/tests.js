'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.run = undefined;

var _context = require('../shared/context');

var _context2 = _interopRequireDefault(_context);

var _page = require('./page');

var _chalk = require('chalk');

var _chalk2 = _interopRequireDefault(_chalk);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function run(dirname, themes) {
  console.log(_chalk2.default.bold.cyan('Testing your themes...') + "\n\n");

  Object.keys(themes).forEach(function (themeHandle, index) {

    (0, _context2.default)({ params: {} }, themes, { dirname: dirname, themeHandle: themeHandle }).then(_page.buildPage).then(function (context) {
      console.log('------ ' + _chalk2.default.bold(themeHandle) + ' ------');
      console.log('Status: ' + _chalk2.default.bold.green('OK'));
      console.log("\n\n");
    }).catch(function (err) {
      console.log('------ ' + _chalk2.default.bold(themeHandle) + ' ------');
      console.log('Status: ' + _chalk2.default.bold.red('KO'));
      console.log('Error: ' + _chalk2.default.red(err));
      console.log(_chalk2.default.bgRed('Backtrace:'));
      console.log(err);
      console.log("\n\n");
    });
  });
}

exports.run = run;