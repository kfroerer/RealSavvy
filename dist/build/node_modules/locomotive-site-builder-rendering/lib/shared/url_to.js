'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

exports.default = function (options) {
  var pages = options.pages;
  var preview = options.preview;
  var mountedOn = options.mounted_on;
  var currentLocale = options.locale;
  var locales = options.locales;
  var multilingual = !(0, _is_blank.isBlank)(locales);

  function relativeUrlTo(url, locale) {
    if (url === undefined || url === null) url = '';
    if (url === 'index') url = '';

    if (multilingual) {
      if ((0, _is_blank.isBlank)(locale)) locale = currentLocale;

      if (locale !== locales[0]) url = url === '' ? locale : locale + '/' + url;
    }

    if (preview) return '/' + mountedOn + '/' + url;else return url.lastIndexOf('/', 0) === 0 ? url : '/' + url;
  }

  function buildUrlTo(type, url, locale) {
    switch (type) {
      case 'external':
        return url;
      case 'relative':
        return relativeUrlTo(url, locale);
      case 'page':
        return relativeUrlTo(pages[url], locale);
      case 'block':
        return '#' + url;
      default:
        if (/^content_type_/i.test(type)) return relativeUrlTo(url, locale);else return url;
    }
  }

  return buildUrlTo;
};

var _is_blank = require('../utils/is_blank');